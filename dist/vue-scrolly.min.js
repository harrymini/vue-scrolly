!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Scrolly={})}(this,function(e){"use strict";var t,n,o,r,i,a,l,s,c,d,u,h,f,p,v,m=!1;function y(){if(!m){m=!0;var e=navigator.userAgent,y=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),b=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(h=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),v=/Mobile/i.exec(e),u=!!/Win64/.exec(e),y){(t=y[1]?parseFloat(y[1]):y[5]?parseFloat(y[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var w=/(?:Trident\/(\d+.\d+))/.exec(e);a=w?parseFloat(w[1])+4:t,n=y[2]?parseFloat(y[2]):NaN,o=y[3]?parseFloat(y[3]):NaN,(r=y[4]?parseFloat(y[4]):NaN)?(y=/(?:Chrome\/(\d+\.\d+))/.exec(e),i=y&&y[1]?parseFloat(y[1]):NaN):i=NaN}else t=n=o=i=r=NaN;if(b){if(b[1]){var g=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);l=!g||parseFloat(g[1].replace("_","."))}else l=!1;s=!!b[2],c=!!b[3]}else l=s=c=!1}}var b,w={ie:function(){return y()||t},ieCompatibilityMode:function(){return y()||a>t},ie64:function(){return w.ie()&&u},firefox:function(){return y()||n},opera:function(){return y()||o},webkit:function(){return y()||r},safari:function(){return w.webkit()},chrome:function(){return y()||i},windows:function(){return y()||s},osx:function(){return y()||l},linux:function(){return y()||c},iphone:function(){return y()||h},mobile:function(){return y()||h||f||d||v},nativeApp:function(){return y()||p},android:function(){return y()||d},ipad:function(){return y()||f}},g=w,x=!("undefined"==typeof window||!window.document||!window.document.createElement),S={canUseDOM:x,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:x&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:x&&!!window.screen,isInWorker:!x};S.canUseDOM&&(b=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var L=function(e,t){if(!S.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var r=document.createElement("div");r.setAttribute(n,"return;"),o="function"==typeof r[n]}return!o&&b&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o},E=10,M=40,T=800;function N(e){var t=0,n=0,o=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),o=t*E,r=n*E,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||r)&&e.deltaMode&&(1==e.deltaMode?(o*=M,r*=M):(o*=T,r*=T)),o&&!t&&(t=o<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:o,pixelY:r}}N.getEventType=function(){return g.firefox()?"DOMMouseScroll":L("wheel")?"wheel":"mousewheel"};var D=N;function W(e){return 100*e+"%"}var O=!1;try{var P=Object.defineProperty({},"passive",{get:function(){O=!0}});window.addEventListener("test",null,P)}catch(e){}var k,H,X,B,F,Y="MutationObserver"in window,_="mousemove",C="mouseup",U={name:"scrolly",props:{parentScroll:{type:Boolean,default:!0},passiveScroll:{type:Boolean,default:!1}},data:function(){return{container:null,viewport:null,barX:null,barY:null,onMouseWheelHandler:null,onDomChangeHandler:null,mutationObserver:null,isScrolling:!1}},computed:{classnames:function(){return["scrolly",this.isScrolling?"is-scrolling":""]}},mounted:function(){this.$nextTick(function(){for(var e,t,n,o,r=this.$el,i=r.childNodes,a=0;o=i[a++];){var l=o.className;l&&(l.match("scrolly-viewport")&&(e=o),l.match("axis-x")&&(t=o),l.match("axis-y")&&(n=o))}if(e&&(t||n)){var s=this.onMouseWheel.bind(this),c=!!this.parentScroll&&this.passiveScroll;r.addEventListener("wheel",s,!!O&&{passive:c});var d,u=this.onDomChange.bind(this);Y?(d=new MutationObserver(u)).observe(e,{childList:!0,characterData:!0,subtree:!0,attributes:!0}):(e.addEventListener("DOMSubtreeModified",u),e.addEventListener("propertychange",u)),Object.assign(this,{container:r,viewport:e,barX:t,barY:n,onMouseWheelHandler:s,onDomChangeHandler:u,mutationObserver:d})}})},methods:{onMouseEnter:function(){this.refreshScrollLayout()},onMouseDown:function(e){var t=e.target,n=e.pageX,o=e.pageY,r=t.className;if("object"!=typeof r||r.match("scrolly-bar")){var i={},a=this,l=this.barX,s=this.barY,c=this.viewport,d=window.addEventListener,u=window.removeEventListener,h=r.match("axis-x"),f=r.match("axis-y"),p=t.offsetTop,v=t.offsetLeft;function m(e){e.preventDefault();var r=e.pageX,d=e.pageY;if(h){var u=c.scrollLeft,m=c.scrollWidth,y=c.offsetWidth,b=t.offsetWidth,w=y-b,g=v+(r-n);g<0&&(g=0),g>w&&(g=w),t.style.left=W(g/y),c.scrollLeft=g/w*(m-y);var x=g<0,S=g>w,L=x||S;i.x=l.scrollLayout={barX:l,scrollLeft:u,scrollWidth:m,viewportWidth:y,barWidth:b,barLeft:g,minBarLeft:0,maxBarLeft:w,visible:!0,onLeftEdge:x,onRightEdge:S,onEdge:L,canUnlockParentScroll:!1,canScrollParent:!1}}if(f){var E=c.scrollTop,M=c.scrollHeight,T=c.offsetHeight,N=t.offsetHeight,D=T-N,O=p+(d-o);O<0&&(O=0),O>D&&(O=D),t.style.top=W(O/T),c.scrollTop=O/D*(M-T);var P=O<=0,k=O>=D,H=P||k;i.y=s.scrollLayout={barY:s,scrollTop:E,scrollHeight:M,viewportHeight:T,barHeight:N,barTop:O,minBarTop:0,maxBarTop:D,onTopEdge:P,onBottomEdge:k,onEdge:H,visible:!0,canUnlockParentScroll:!1,canScrollParent:!1,scrolled:!0}}a.$emit("scrollchange",i)}a.isScrolling=!0,d("mousemove",m),d("mouseup",function e(){a.isScrolling=!1,u(C,e),u(_,m)})}else;},onMouseWheel:function(e){var t=D(e),n=t.pixelX,o=t.pixelY,r=this.refreshScrollLayout(n,o),i=r.x,a=r.y;if(!this.passiveScroll){var l=i&&i.canScrollParent,s=a&&a.canScrollParent;(!this.parentScroll||!l&&!s)&&e.preventDefault()}},onMouseLeave:function(e){var t=this.barX,n=this.barY;t&&(t.scrollLayout=null),n&&(n.scrollLayout=null)},onDomChange:(k=function(){this.refreshScrollLayout()},H=250,H||(H=250),function(){var e=X||this,t=+new Date,n=arguments;B&&t<B+H?(clearTimeout(F),F=setTimeout(function(){B=t,k.apply(e,n)},H)):(B=t,k.apply(e,n))}),refreshScrollLayout:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n={},o=this.viewport,r=this.barX,i=this.barY;if(r){var a=0!==e;o.scrollLeft+=e;var l=o.scrollLeft,s=o.scrollWidth,c=o.offsetWidth,d=r.style;d.visibility="hidden",d.display="block",d.width=W(c/s);var u=r.offsetWidth,h=c-u,f=l/(s-c)*h||0,p=f<0,v=f>h,m=p||v;p&&(f=0),v&&(f=h),d.left=W(f/c);var y=u<c;d.display=y?"block":"none",d.visibility="visible";var b=Math.abs(e)>25,w=r.scrollLayout||{},g=w.onEdge,x=w.canUnlockParentScroll,S=!!(w.canScrollParent||g&&x);n.x=r.scrollLayout={barX:r,scrollLeft:l,scrollWidth:s,viewportWidth:c,barWidth:u,barLeft:f,minBarLeft:0,maxBarLeft:h,onLeftEdge:p,onRightEdge:v,onEdge:m,visible:y,canUnlockParentScroll:b,canScrollParent:S,scrolled:a}}if(i){var L=0!==t;o.scrollTop+=t;var E=o.scrollTop,M=o.scrollHeight,T=o.offsetHeight,N=i.style;N.visibility="hidden",N.display="block",N.height=W(T/M);var D=i.offsetHeight,O=T-D,P=E/(M-T)*O||0,k=P<=0,H=P>=O,X=k||H;k&&(P=0),H&&(P=O),N.top=W(P/T);var B=D<T;N.display=B?"block":"none",N.visibility="visible";var F=Math.abs(t)>25,Y=i.scrollLayout||{},_=Y.onEdge,C=Y.canUnlockParentScroll,U=Y.canScrollParent,A=!(!X||!(U||_&&C));n.y=i.scrollLayout={barY:i,scrollTop:E,scrollHeight:M,viewportHeight:T,barHeight:D,barTop:P,minBarTop:0,maxBarTop:O,onTopEdge:k,onBottomEdge:H,onEdge:X,visible:B,canUnlockParentScroll:F,canScrollParent:A,scrolled:L}}return this.$emit("scrollchange",n),n}},beforeDestroy:function(){var e=this.container,t=this.viewport,n=this.onMouseWheelHandler,o=this.onDomChangeHandler,r=this.mutationObserver;r&&r.disconnect(),Y||(t.removeEventListener("DOMSubtreeModified",o),t.removeEventListener("propertychange",o)),e.removeEventListener("wheel",n)}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),n='.scrolly { position: relative; } .scrolly .scrolly-bar { opacity: 0; } .scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar { opacity: 1; } .scrolly-viewport { position: absolute; overflow: hidden; width: 100%; height: 100%; z-index: 1; } .scrolly-bar { position: absolute; border: 7px solid transparent; cursor: pointer; z-index: 2; transition: opacity .1s ease; } .scrolly-bar:before { position: absolute; width: 100%; height: 100%; content: " "; background: rgba(0, 0, 0, 0.3); border-radius: 7px; transition: background .2s ease; } .scrolly-bar:hover:before { background: rgba(0, 0, 0, 0.6); } .scrolly-bar.axis-x { left: 0; bottom: 0; width: 100%; height: 21px; min-width: 20%; max-width: 100%; } .scrolly-bar.axis-y { top: 0; right: 0; width: 21px; height: 100%; min-height: 20%; max-height: 100%; } ';t.type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),e.appendChild(t)}}();var A=Object.assign(U,{render:function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames,on:{mouseenter:this.onMouseEnter,mousedown:this.onMouseDown,mouseleave:this.onMouseLeave}},[this._t("default")],2)},staticRenderFns:[]});A.prototype=U.prototype,function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var V={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)},staticRenderFns:[],name:"scrolly-viewport",computed:{classnames:function(){return["scrolly-viewport"]}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var $={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)},staticRenderFns:[],name:"scrolly-bar",props:{axis:{type:String,default:"y"}},computed:{classnames:function(){return["scrolly-bar","axis-"+this.axis]}}};"undefined"!=typeof window&&window.Vue&&(window.Vue.component("scrolly",A),window.Vue.component("scrolly-viewport",V),window.Vue.component("scrolly-bar",$)),e.Scrolly=A,e.ScrollyViewport=V,e.ScrollyBar=$,Object.defineProperty(e,"__esModule",{value:!0})});
